{"ast":null,"code":"/**\n * @param {String} url\n * Делает запрос по заданному к API с помощью fetch. Также обновляет статус \"онлайн\" каждый 30 секунд, если запросов в течении этого времени не было\n * @param {String} [method='get']\n * @param {Object} params\n * @param {Boolean} [token=true] is auth needed\n * @param {Boolean} is_url_full\n * @param {Object} options:\n * - parse_type - json | text\n * - token\n * - abortController\n * @return {Promise}\n */\nexport function request(url, method = 'GET', params) {\n  let body;\n  return fetch(url, {\n    method: method,\n    body: body\n  }).then(response => {\n    if (response.ok) {\n      let parser = {\n        json: () => response.json(),\n        text: () => response.text()\n      };\n      return parser();\n    }\n\n    return response.json();\n  }).catch(error => {\n    return Promise.reject(error);\n  });\n}","map":{"version":3,"sources":["/home/aziza/reactapp/src/actions/request.js"],"names":["request","url","method","params","body","fetch","then","response","ok","parser","json","text","catch","error","Promise","reject"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,OAAT,CAAiBC,GAAjB,EAAsBC,MAAM,GAAG,KAA/B,EAAsCC,MAAtC,EAA8C;AACpD,MAAIC,IAAJ;AACA,SAAOC,KAAK,CAACJ,GAAD,EAAM;AACjBC,IAAAA,MAAM,EAAEA,MADS;AAEjBE,IAAAA,IAAI,EAAEA;AAFW,GAAN,CAAL,CAGJE,IAHI,CAGCC,QAAQ,IAAI;AACnB,QAAIA,QAAQ,CAACC,EAAb,EAAiB;AAChB,UAAIC,MAAM,GAAG;AACZC,QAAAA,IAAI,EAAE,MAAMH,QAAQ,CAACG,IAAT,EADA;AAEZC,QAAAA,IAAI,EAAE,MAAMJ,QAAQ,CAACI,IAAT;AAFA,OAAb;AAIA,aAAOF,MAAM,EAAb;AACA;;AACD,WAAOF,QAAQ,CAACG,IAAT,EAAP;AACA,GAZM,EAYJE,KAZI,CAYEC,KAAK,IAAI;AACjB,WAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,GAdM,CAAP;AAeA","sourcesContent":["\n/**\n * @param {String} url\n * Делает запрос по заданному к API с помощью fetch. Также обновляет статус \"онлайн\" каждый 30 секунд, если запросов в течении этого времени не было\n * @param {String} [method='get']\n * @param {Object} params\n * @param {Boolean} [token=true] is auth needed\n * @param {Boolean} is_url_full\n * @param {Object} options:\n * - parse_type - json | text\n * - token\n * - abortController\n * @return {Promise}\n */\nexport function request(url, method = 'GET', params) {\n\tlet body;\n\treturn fetch(url, {\n\t\tmethod: method,\n\t\tbody: body,\n\t}).then(response => {\n\t\tif (response.ok) {\n\t\t\tlet parser = {\n\t\t\t\tjson: () => response.json(),\n\t\t\t\ttext: () => response.text(),\n\t\t\t};\n\t\t\treturn parser();\n\t\t}\n\t\treturn response.json();\n\t}).catch(error => {\n\t\treturn Promise.reject(error);\n\t});\n}"]},"metadata":{},"sourceType":"module"}