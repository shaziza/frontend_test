{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/aziza/frontend_test/src/components/UsersPage.js\";\nimport '../styles/App.css';\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport Pagination from \"react-js-pagination\";\nimport { getUsers } from '../actions/actions.js';\nimport { USERS_KEY, COUNT_PAGES_KEY } from '../actions/keys';\nimport { getPathFromObject } from '../helpers.js';\nimport UserCard from './UserCard';\n\nclass UsersPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active_page: 1,\n      selected: {}\n    };\n    this.handlePageChange = this.handlePageChange.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.location.search.includes('page')) {\n      const page = window.localStorage.getItem('PAGE');\n      this.props.getUsers(page);\n    } else {\n      window.localStorage.removeItem('PAGE');\n      this.props.getUsers();\n    }\n  }\n\n  componentWillUnmount() {\n    window.localStorage.removeItem('PAGE');\n  }\n\n  handlePageChange(pageNumber) {\n    this.setState({\n      activePage: pageNumber\n    });\n    this.props.getUsers(pageNumber);\n    this.props.history.push({\n      search: `?page=${pageNumber}`\n    });\n    window.localStorage.setItem('PAGE', pageNumber);\n  }\n\n  onSelect(item_id) {\n    const selected = Object.assign({}, this.state.selected);\n\n    if (!selected[item_id]) {\n      const selected = {\n        [item_id]: true\n      };\n      this.setState({\n        selected\n      });\n    } else {\n      this.setState({\n        selected: {}\n      });\n    }\n  }\n\n  renderUsers() {\n    const users = this.props.users;\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item_list\",\n        children: users.map(i => {\n          return /*#__PURE__*/_jsxDEV(UserCard, {\n            params: i,\n            onSelect: () => this.onSelect(i.id),\n            isSelected: this.state.selected[i.id]\n          }, i.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 7\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: this.props.pagination.pages > 1 && /*#__PURE__*/_jsxDEV(Pagination, {\n          hideDisabled: true,\n          activePage: this.state.active_page,\n          itemsCountPerPage: 12,\n          totalItemsCount: this.props.pagination.pages,\n          pageRangeDisplayed: 10,\n          itemClass: \"page-item\",\n          linkClass: \"page-link\",\n          getPageUrl: i => `/?page=${i}`,\n          onChange: this.handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 3\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.props.users.length > 0 && this.renderUsers()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    users: getPathFromObject(state.database, USERS_KEY, []),\n    pagination: getPathFromObject(state.database, `${COUNT_PAGES_KEY}.users`, [])\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getUsers(pageNumber) {\n      return dispatch(getUsers(pageNumber));\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersPage);","map":{"version":3,"sources":["/home/aziza/frontend_test/src/components/UsersPage.js"],"names":["React","Component","Fragment","connect","Pagination","getUsers","USERS_KEY","COUNT_PAGES_KEY","getPathFromObject","UserCard","UsersPage","constructor","props","state","active_page","selected","handlePageChange","bind","onSelect","componentDidMount","location","search","includes","page","window","localStorage","getItem","removeItem","componentWillUnmount","pageNumber","setState","activePage","history","push","setItem","item_id","Object","assign","renderUsers","users","map","i","id","pagination","pages","render","length","mapStateToProps","database","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import '../styles/App.css';\nimport React, {Component, Fragment} from 'react'\nimport {connect} from 'react-redux'\nimport Pagination from \"react-js-pagination\";\nimport {\n\tgetUsers\n} from '../actions/actions.js'\nimport {\n\tUSERS_KEY,\n\tCOUNT_PAGES_KEY\n} from '../actions/keys';\nimport {\n\tgetPathFromObject\n} from '../helpers.js';\nimport UserCard from './UserCard'\n\nclass UsersPage extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tactive_page: 1,\n\t\t\tselected: {},\n\t\t}\n\t\tthis.handlePageChange = this.handlePageChange.bind(this);\n\t\tthis.onSelect = this.onSelect.bind(this);\n\t}\n\tcomponentDidMount() { \n\t\tif (this.props.location.search.includes('page')) {\n\t\t\tconst page = window.localStorage.getItem( 'PAGE');\n\t\t\tthis.props.getUsers(page)\n\t\t} else {\n\t\t\twindow.localStorage.removeItem( 'PAGE');\n\t\t\tthis.props.getUsers()\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.localStorage.removeItem( 'PAGE');\n\t}\n\thandlePageChange(pageNumber) {\n\t\tthis.setState({activePage: pageNumber});\n\t\tthis.props.getUsers(pageNumber);\n\t\tthis.props.history.push({search: `?page=${pageNumber}`});\n\t\twindow.localStorage.setItem( 'PAGE', pageNumber);\n\t}\n\tonSelect(item_id) {\n\t\tconst selected = Object.assign({}, this.state.selected);\n\t\tif (!selected[item_id]) {\n\t\t\tconst selected = {[item_id]: true};\n\t\t\tthis.setState({\n\t\t\t\tselected, \n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({selected: {}});\n\t\t}\n\t}\n\trenderUsers() {\n\t\tconst users = this.props.users;\n\t\treturn (\n\t\t<Fragment>\n\t\t\t<div className='item_list'>  \n\t\t\t\t{users.map((i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<UserCard \t\n\t\t\t\t\t\t\tkey={i.id} \n\t\t\t\t\t\t\tparams={i} \n\t\t\t\t\t\t\tonSelect={() => this.onSelect(i.id)} \n\t\t\t\t\t\t\tisSelected={this.state.selected[i.id]} />\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div className='pagination'>\n\t\t\t\t{this.props.pagination.pages > 1 && (\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\thideDisabled\n\t\t\t\t\t\tactivePage={this.state.active_page}\n\t\t\t\t\t\titemsCountPerPage={12}\n\t\t\t\t\t\ttotalItemsCount={this.props.pagination.pages}\n\t\t\t\t\t\tpageRangeDisplayed={10}\n\t\t\t\t\t\titemClass='page-item'\n\t\t\t\t\t\tlinkClass='page-link'\n\t\t\t\t\t\tgetPageUrl={(i) => `/?page=${i}`}\n\t\t\t\t\t\tonChange={this.handlePageChange} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Fragment>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.props.users.length > 0 && this.renderUsers()}\n\t\t\t</div>\n\t\t);\n\t  }\n\t}\n\n\tconst mapStateToProps = (state) => {\n\t\treturn {\n\t\t\tusers : getPathFromObject(state.database, USERS_KEY, []),\n\t\t\tpagination: getPathFromObject(state.database, `${COUNT_PAGES_KEY}.users`, []),\n\t\t}\n\t}\n\t   \n\tconst mapDispatchToProps = (dispatch) => {\n\t\treturn {\n\t\t\tgetUsers(pageNumber) {\n\t\t\t\treturn dispatch(getUsers(pageNumber));\n\t\t\t}\n\t\t}\n\t}\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(UsersPage);\n"]},"metadata":{},"sourceType":"module"}